# Redis Sentinel Configuration for High Availability
# Provides automatic failover and monitoring

port 26379
dir /data

# Monitor the primary Redis instance
sentinel monitor capsight-redis 127.0.0.1 6379 2
sentinel auth-pass capsight-redis ${REDIS_PASSWORD:-change_this_redis_password}

# Failover settings
sentinel down-after-milliseconds capsight-redis 5000
sentinel parallel-syncs capsight-redis 1
sentinel failover-timeout capsight-redis 10000

# Notification scripts (optional)
# sentinel notification-script capsight-redis /path/to/notify.sh
# sentinel client-reconfig-script capsight-redis /path/to/reconfig.sh

# Security
requirepass ${SENTINEL_PASSWORD:-change_this_sentinel_password}

# Logging
logfile /var/log/redis-sentinel.log
loglevel notice

# Announce settings for Docker/Kubernetes
sentinel announce-ip ${SENTINEL_ANNOUNCE_IP:-127.0.0.1}
sentinel announce-port ${SENTINEL_ANNOUNCE_PORT:-26379}
